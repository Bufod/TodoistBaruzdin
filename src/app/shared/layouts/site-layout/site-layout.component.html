<form
  [formGroup]="form"
  (ngSubmit)="submit()"
>
  <div>
    <input type="text" pInputText formControlName="name"/>
  </div>
  <div>
    <input type="text" pInputText formControlName="description"/>
  </div>
  <div>
    <input type="text" pInputText formControlName="category"/>
  </div>
  <div>
    <p-calendar
      dateFormat="dd.mm.yy"
      formControlName="deadline"
      [showIcon]="true"
      dataType="string"
    ></p-calendar>
  </div>
  <div>
    <p-dropdown
      formControlName="priority"
      [options]="priority"
      [showClear]="true"
      optionLabel="name"
      placeholder="Выбрать приоритет"
    ></p-dropdown>
  </div>
  <p-button
    type="submit"
    label="Submit"
    [disabled]="form.invalid"
  ></p-button>
</form>

<p-table [value]="tasks" [tableStyle]="{ 'min-width': '50rem' }">
  <ng-template  pTemplate="header">
    <tr>
      <th pSortableColumn="name" style="width:15%">Название задачи<p-sortIcon field="name"></p-sortIcon></th>
      <th pSortableColumn="description" style="width:15%">Описание задачи<p-sortIcon field="description"></p-sortIcon></th>
      <th pSortableColumn="category" style="width:15%">Категория задачи<p-sortIcon field="category"></p-sortIcon></th>
      <th pSortableColumn="deadline" style="width:15%">Срок задачи<p-sortIcon field="deadline"></p-sortIcon></th>
      <th pSortableColumn="priority" style="width:15%">Проиритет задачи<p-sortIcon field="priority"></p-sortIcon></th>
      <th pSortableColumn="status" style="width:15%">Статус задачи<p-sortIcon field="status"></p-sortIcon></th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-task>
    <tr>
      <td>{{task.name}}</td>
      <td>{{task.description}}</td>
      <td>{{task.category}}</td>
      <td>{{task.deadline}}</td>
      <td>{{task.priority.name}}</td>
      <td>{{task.status}}
        <p-button icon="pi pi-check"></p-button>

<!--        Закинуть в отдельных компонент-->
        <p-button icon="pi pi-pencil" (click)="showDialog(task)" severity="warning"></p-button>
        <p-dialog header="Header" [(visible)]="visible" [style]="{ width: '50vw' }">
          <ng-template pTemplate="header">
            <span class="text-xl font-bold">Измение задачи</span>
          </ng-template>
          <form
            [formGroup]="formEdit"
            (ngSubmit)="submit()"
          >
            <div>
              <input type="text" pInputText formControlName="name"/>
            </div>
            <div>
              <input type="text" pInputText formControlName="description"/>
            </div>
            <div>
              <input type="text" pInputText formControlName="category"/>
            </div>
            <div>
              <p-calendar
                dateFormat="dd.mm.yy"
                formControlName="deadline"
                [showIcon]="true"
                dataType="string"
              ></p-calendar>
            </div>
            <div>
              <p-dropdown
                formControlName="priority"
                [options]="priority"
                [showClear]="true"
                optionLabel="name"
                [placeholder]="task.priority"
              ></p-dropdown>
            </div>
            <p-button
              type="submit"
              label="Submit"
              [disabled]="form.invalid"
            ></p-button>
          </form>
          <ng-template pTemplate="footer">
            <p-button icon="pi pi-check" (click)="visible = false" label="Ok" styleClass="p-button-text"></p-button>
          </ng-template>
        </p-dialog>


        <p-button icon="pi pi-times" (click)="deleteTask(task)" severity="danger"></p-button>
      </td>

    </tr>
  </ng-template>
</p-table>
